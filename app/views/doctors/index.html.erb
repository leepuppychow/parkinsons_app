<%= render partial: "partials/patient_header"%>

<div class="column-container">
  <br>
  <div class="">
    <%= link_to "New Doctor?", new_patient_doctor_path(current_user), id: "new-doctor" %>
    <%= link_to "Find Doctor Tool", patient_find_doctor_index_path(current_user), id: "new-doctor" %>
  </div>
  <% current_user.doctors.each do |doctor|  %>
  <div class="healthprovider-box">
    <h2><%= doctor.name %> (<%= doctor.specialty %>)</h2>
    <%= doctor.location %></br>
    <%= doctor.phone %>
    <div class="appointments">
      <h4>Upcoming Appointments:</h4>
      <% doctor.current_appointments(current_user).each do |appointment|  %>
        <li>
          <%= appointment.date.strftime("%b %e, %Y") %> --> <%= appointment.time.strftime("%I:%M %p") %>
          <%= link_to "Edit", edit_patient_appointment_path(current_user, appointment) %>
          <%= link_to "Delete", patient_appointment_path(current_user, appointment), method: :delete %>
        </li>
      <% end %>
      <%= link_to "New Appointment", new_patient_appointment_path(current_user) %>
    </div>
    <div class="row-container">
      <%= form_for [current_user, doctor, doctor.note] do |f| %>
        <%= f.label "Notes:" %></br>
        <%= f.text_area :contents, class: "note-box" %></br>
        <%= f.submit "Update Note" %>
      <% end %>
      <%= link_to "Edit", edit_patient_doctor_path(current_user, doctor), method: :get, id: "edit-link" %>
      <%= link_to "Remove", patient_doctor_path(current_user, doctor), method: "delete", id: "delete-link"%>
    </div>
  </div>
  <% end  %>
</div>

<%= render partial: "partials/patient_footer"%>
